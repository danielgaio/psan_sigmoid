// arquivo contendo a descricao sitetizavel

`timescale 1ns / 1ps

module psoa_sigmoid (
	input 	logic [15:0] x,
	input 	logic clk,
	output 	logic [15:0] f_x
);
	
	// sinais auxiliares
	logic [32:0] x1, x2, x3, x4, x5, x6;
	
	always @ (posedge clk) begin

		// implementacao da equacao por partes
		if (x >= 4096) begin

			f_x <= 1024;

		end else if ((x >= 0) && (x < 4096)) begin
			
			f_x <= x6 - x3;

		end
	
	end // always
	
	always @ (*) begin
		//x1 <= x >> 10;	// equivale a divisao de x por 2^10
		//x2 <= x1*x1;
		x1 <= x**2;
		x2 <= x1>>20;
		x3 <= (x2<<5) + (x2<<2);
		
		x4 <= (x<<8) + (x<<3) + x;
		x5 <= x4>>10;
		x6 <= x5 + 515;
	end

endmodule